{% extends 'base-dashboard.html.twig' %}

{% block title %}Backend Users{% endblock %}

{% block breathcrumbs %}/ Users{% endblock %}

{% block bodyDashboard %}
    {# <section> #}
        {# Add some filtering buttons #}

        {# <button class="primary">Add user</button>
    </section> #}

    <section>
        <table>
            <thead>
                <tr>
                    <th>Email</th>
                    <th>Roles</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.email }}</td>
                    <td>
                        <div class="items">
                        {% for role in user.roles %}     
                            <div class="small-tag">{{ role }}</div>
                        {% endfor %}
                        </div>
                    </td>
                    <td>
                        <div class="items">
                            <a href="{{ path('app_user_delete', { id: user.id }) }}">
                                <button class="secondary">Edit</button>
                            </a>
                            {% if app.user.id != user.id and 'ROLE_ADMIN' in app.user.roles %}
                                <a href="{{ path('app_user_delete', { id: user.id }) }}">
                                    <button class="secondary">Delete</button>
                                </a>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
{% endblock %}
